(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[27],{"1P4G":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return s}));var o=n("mwIZ"),a=n.n(o),r=function(e){var t=e.isFavourite,n=e.objectID;return"".concat(t?"favoriteSwitchOff":"favoriteSwitchOn","_").concat(n)},i=function(e){return"fetchLike_".concat(e)},c=function(e,t){return!!(a()(e,[i(t),"data","results"])||[]).find((function(e){return e.id===t}))},s=function(e,t,n){e.client.patch(i(t),(function(e){return Object.assign(e,{results:n?[]:[{id:t}]})}))}},QyLP:function(e,t,n){"use strict";n.d(t,"a",(function(){return xe}));var o=n("HALo"),a=n("dhJC"),r=n("q1tI"),i=n.n(r),c=n("+M00"),s=n.n(c),l=n("lSEo"),u=n("wTIg"),d=n("+p8+"),p=Object(u.a)(d.Paper,{target:"ey24pgl0"})("border:1px solid #ddd;box-shadow:none;height:",(function(e){return e.isMobile?"100%":"auto"}),";width:",(function(e){return e.isMobile?"100%":"auto"}),";.actions{height:",(function(e){return e.isMobile?"90%":"auto"}),";}.agent-info{padding:10px 16px;background:#fff;display:flex;svg{&:hover{cursor:pointer;}}}.divider{width:30%;margin:8px auto;}.phone{display:flex;align-items:stretch;justify-content:center;margin-bottom:8px;a{color:currentColor;text-decoration:none;}> div{display:flex;align-items:center;:first-of-type{font-size:18px;> svg{margin-right:4px;}}> img{display:block;width:14px;height:14px;border-radius:8px;border:1px solid ",(function(e){return e.theme.colors.silverGrey}),";object-fit:cover;& + img{margin-left:4px;}}}}"),f=n("cpVT"),b=n("xvhg"),g=n("foVU"),h=n.n(g),m=n("tkqT"),v=n.n(m),j=n("20a2"),O=n("mwIZ"),y=n.n(O),w=n("exS8"),x=n.n(w),P=n("A6oH"),S=n.n(P),E=n("BHdc"),k=n("H+61"),L=n("UlJF"),M=n("+Css"),I=n("7LId"),C=n("VIvw"),F=n("iHvq"),A=n("17x9"),D=n.n(A),T=n("2NuI"),N=n.n(T),_=n("2SQs"),V=n.n(_),q=n("I7wR"),R=n.n(q),B=n("xQ8M"),U=n.n(B),z=n("4s2K"),H=n("9/5/"),J=n.n(H),W=function(e,t){try{return e.isSameNode(t)}catch(n){return e===t}},Q=i.a.createElement;function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(F.a)(e);if(t){var a=Object(F.a)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Object(C.a)(this,n)}}var X={children:D.a.node,live:D.a.bool,onFormChange:D.a.func,onFormComplete:D.a.func,onFormSubmit:D.a.func,onValidationError:D.a.func,prevalidate:D.a.func,validate:D.a.func,postvalidate:D.a.func},Y=function(e){Object(I.a)(n,e);var t=Z(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),Object(f.a)(Object(M.a)(e),"errors",[]),Object(f.a)(Object(M.a)(e),"debounceSubmit",J()((function(){e.emitEvent(e.props.onFormSubmit)}),300)),Object(f.a)(Object(M.a)(e),"getChildContext",(function(){return{errors:e.errors}})),Object(f.a)(Object(M.a)(e),"handleFormSubmitDebounced",(function(t){t.preventDefault(),t.stopPropagation(),e.debounceSubmit()})),Object(f.a)(Object(M.a)(e),"setErrors",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=e.props.onValidationError;N()(Array.isArray(t),"Validate should return an Array."),e.errors=t,e.forceUpdate(),n&&(N()(R()(n),"onValidationError should be a function."),n(e.errors))})),Object(f.a)(Object(M.a)(e),"handleRef",(function(t){e.node=t})),Object(f.a)(Object(M.a)(e),"shouldValidate",(function(t){var n=e.props.live;return!(!e.hasErrors()&&!n)||R()(t)})),Object(f.a)(Object(M.a)(e),"prevalidate",(function(t){var n=e.props.prevalidate;if(!n)return Promise.resolve(t);N()(R()(n),"Prevalidate prop should be a function.");var o=n(t);return Promise.resolve(o)})),Object(f.a)(Object(M.a)(e),"makeValidator",(function(t){return function(n){var o;if(!e.props.validate)return Promise.resolve(n);N()(R()(e.props.validate),"Validate prop should be a function."),N()(U()(n),"Prevalidate should return a form object.");var a=[n,t,e.errors];return(o=e.props).validate.apply(o,a).catch((function(t){return e.setErrors(t),Promise.reject(t)}))}})),Object(f.a)(Object(M.a)(e),"postvalidate",(function(t){var n=e.props.postvalidate,o=t;if(!n)return Promise.resolve(t);if(e.setErrors([]),N()(R()(n),"Postvalidate prop should be a function."),Object.keys(t).includes("email")&&t.email){var a=t.email;o=K(K({},t),{},{method:"mail",methodValue:a})}var r=n(o);return Promise.resolve(r)})),Object(f.a)(Object(M.a)(e),"emitEvent",(function(t,n){if(t)N()(R()(t),"Event handler should be a function.");else if(!e.shouldValidate(t))return void(R()(t)&&t(e.formData));e.prevalidate(e.formData).then(e.makeValidator(n)).then(e.postvalidate).then(t)})),Object(f.a)(Object(M.a)(e),"handleFormChange",(function(t){var n,o=e.props,a=o.onFormChange,r=o.onFormComplete;"input"===t.nativeEvent.type?(e.lastNode=t.target,n=a):n=r||a,e.emitEvent(n,t.target.name),t.stopPropagation()})),Object(f.a)(Object(M.a)(e),"handleFormBlur",(function(t){var n;W(t.target,e.lastNode)&&(n=e.props.onFormComplete,e.lastNode=null),e.emitEvent(n,t.target.name)})),Object(f.a)(Object(M.a)(e),"handleFormSubmit",(function(t){t.preventDefault(),e.emitEvent(e.props.onFormSubmit)})),Object(f.a)(Object(M.a)(e),"render",(function(){return Q("form",Object(o.a)({},e.formProps,{onChange:e.handleFormChange,onBlur:e.handleFormBlur,onSubmit:e.handleFormSubmitDebounced,ref:e.handleRef}),e.props.children)})),e}return Object(L.a)(n,[{key:"reset",value:function(){this.node.reset()}},{key:"hasErrors",value:function(){return 0!==this.errors.length}},{key:"formData",get:function(){return Object(z.default)(this.node)}},{key:"formProps",get:function(){var e=Object.keys(X);return V()(this.props,e)}}]),n}(r.Component);Object(f.a)(Y,"defaultProps",{children:void 0,live:!1,onFormChange:void 0,onFormComplete:void 0,onFormSubmit:void 0,onValidationError:void 0,prevalidate:function(e){return e},postvalidate:function(e){return e},validate:void 0}),Object(f.a)(Y,"childContextTypes",{errors:D.a.arrayOf(D.a.shape())});var $=n("B8uC"),ee=n("DUu1"),te=n("BibN"),ne=n("Qt4N"),oe=n("HiA9"),ae=n("BATh"),re=n.n(ae),ie=n("Aiso"),ce=n.n(ie),se=n("ma3e"),le=i.a.createElement,ue=function(e){var t=e.socialMedia,n=e.listingType,o=e.texts,a=e.isMobile,r=e.isPdp;return a&&r?null:le(i.a.Fragment,null,le("p",{style:{textAlign:"center"}},o.or),t.phoneUrl&&le("div",null,le("a",{href:t.phoneUrl,target:"_self",rel:"noopener noreferrer",title:"Telephone",className:"telephone-button-".concat(n),style:{gap:"10px"}},le(se.a,{size:18,style:{marginRight:"6px"}}),"Phone")),t.telegramUrl&&le("div",null,le("a",{href:t.telegramUrl,target:"_blank",rel:"noopener noreferrer",title:"Telegram",className:"telegram-button-".concat(n),style:{gap:"10px"}},le(ce.a,{src:"".concat("https://www.realestate.com.kh","/static/img/social-icons/telegram.svg"),alt:"Telegram",width:"18",height:"18"}),"Telegram")),t.whatsappUrl&&le("div",null,le("a",{href:t.whatsappUrl,target:"_blank",rel:"noopener noreferrer",title:"WhatsApp",className:"whatsapp-button-".concat(n),style:{gap:"10px"}},le("div",{style:{position:"relative",width:"24px",height:"24px"}},le(ce.a,{src:"".concat("https://www.realestate.com.kh","/static/img/social-icons/whatsapp.svg"),alt:"WhatsApp",layout:"fill"})),"Whatsapp")))},de=ue;ue.defaultProps={isMobile:!1,isPdp:!1};var pe=n("nkcq"),fe=n("ABvK"),be=Object(u.a)("div",{target:"e5xzmq90"})("padding:16px;border-top:1px solid #ddd;box-shadow:",(function(e){return e.isMobile?"none":"rgb(55 55 55 / 18%) 0 14px 18px -1px"}),";height:",(function(e){return e.isMobile?"100%":"auto"}),";button,form{height:",(function(e){return e.isMobile?"auto":"100%"}),";}a{font-size:14px;min-height:36px;max-height:36px;white-space:nowrap;}.icon{margin-right:4px;}"),ge=n("yOzD"),he=i.a.createElement;function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var je=re()(ee.a,v.a),Oe=Object(u.a)(Y,{target:"ef1v6mp0"})({name:"1vp8hhu",styles:"padding-top:0;display:block;height:100%;"});function ye(e){var t,n,c=e.contacts,s=e.texts,u=(e.onEmailModalToggle,e.listingId),d=e.currentLanguage,p=(e.hideCall,e.chatEnabled,e.socialMedia),f=(e.currentAgent,e.onChatClick,e.chatLoading,e.header,e.displayAsProject),g=e.isShowInListing,m=e.list,v=e.closeModal,O=(e.owners,e.isPdp),w=Object(a.a)(e,["contacts","texts","onEmailModalToggle","listingId","currentLanguage","hideCall","chatEnabled","socialMedia","currentAgent","onChatClick","chatLoading","header","displayAsProject","isShowInListing","list","closeModal","owners","isPdp"]),P=Object(j.useRouter)().asPath,k=Object(l.a)("(max-width: 435px)"),L=Object(ge.a)((function(e){return e.setNextForm})),M=Object(ge.a)((function(e){return e.setOpenEnrichmentForm})),I=Object(ge.a)((function(e){return e.setOpenSummaryEnrichmentForm})),C=Object(r.useContext)(fe.a),F=C.showLoginRegister,A=C.setShowLoginRegister,D=Object(r.useState)(),T=D[0],N=D[1],_=Object($.a)(),V=_.contactForm,q=_.contactMethods,R=_.emailMessageRequest,B=_.user,U=_.post,z=_.essentials,H=y()(R,"isLoading",!1),J=y()(B,"data.user",{}),W=y()(B,["data","user","isAuthenticated"],!1),Q=Object(r.useState)(!1),G=Q[0],K=Q[1],Z=Object(r.useState)(!1),X=Z[0],Y=Z[1],ee=i.a.useState(!1),ae=Object(b.a)(ee,2),re=ae[0],ie=ae[1];i.a.useEffect((function(){ie(("ontouchstart"in window||navigator.maxTouchPoints>0)&&window.innerWidth<768)}),[]),i.a.useEffect((function(){var e;return X&&g&&(e=setTimeout((function(){v()}),1e3)),function(){g&&clearTimeout(e)}}),[X,g,v,M]);var ce=g?{}:Object(oe.a)({buy_rent:w.searchType,location:w.address,property_type:w.categoryName,budget:w.displayPrice}),se=Object(r.useState)({}),le=se[0],ue=se[1],me=(z.data||{loginSettings:{enableForcedLoginToSendEnquiry:!1}}).loginSettings.enableForcedLoginToSendEnquiry,ye=""===(null===(t=w.header)||void 0===t?void 0:t.salePrice)?"rent":"buy";i.a.useState((function(){var e;N(g?f?"project":ye:null!==w&&void 0!==w&&null!==(e=w.listing)&&void 0!==e&&e.displayAsProject?"project":ye)}),[]);var we=W||!W&&!me||!W&&"sale"!==T&&!(null!==w&&void 0!==w&&null!==(n=w.listing)&&void 0!==n&&n.displayAsProject),xe=localStorage.getItem("clid")||"",Pe=Object(ne.b)({listingId:u,selectedContacts:c,toggle:g?function(){}:function(){document.getElementById("chat-box-goto").scrollIntoView()}},d,!1,g?m.find((function(e){return e.id===u})):ce,U,Y,L,M,I,we,(function(e){localStorage.setItem("temp_enquiry_info",JSON.stringify(e)),A(ve(ve({},F),{},{display:!0,type:"login"}))}),K,P,xe);return Object(r.useEffect)((function(){var e=localStorage.getItem("temp_enquiry_info");if(e&&W){var t=JSON.parse(e);Pe(t),localStorage.removeItem("temp_enquiry_info")}})),he(be,{isMobile:k},he(Oe,{className:"content",prevalidate:function(e){return ve(ve({},e),{},{method:le.method,methodValue:le.value})},validate:je({contactForm:V,contactMethods:q},le),postvalidate:ne.c,onFormSubmit:X||G?void 0:Pe},he(te.a,Object(o.a)({},w,{contactMethods:q,success:X,texts:s,userData:J,setMethodState:ue})),he(S.a,{invisible:!0}),!X&&he(h.a,{submit:!0,blockLevel:!0,color:"white",chatButton:!0,disabled:H||G,busy:H||G,className:Object(E.a)("submit-enquiry-button-".concat(T),re&&"is-mobile")},s.contactAgents),X&&he(x.a,{color:"success",element:"p",h6:!0,center:!0},s.messageSent)),he(pe.b,null,he(de,{isMobile:k,isPdp:O,socialMedia:p,listingType:T,texts:s})))}ye.defaultProps={list:{},closeModal:null,isShowInListing:!1,displayAsProject:!1,hideCall:!1,chatEnabled:!1,isPdp:!1,socialMedia:null,currentAgent:null,project:null,onChatClick:void 0,chatLoading:!1,setOpenEnrichmentModal:null};var we=i.a.createElement;function xe(e){var t=e.aside,n=e.iovox,c=e.contacts,u=e.project,d=e.onEmailModalToggle,f=e.onBookVisitToggle,b=e.currentLanguage,g=e.isShowInListing,h=e.displayAsProject,m=e.closeModal,v=e.texts,j=e.id,O=e.isPdp,y=Object(a.a)(e,["aside","iovox","contacts","project","onEmailModalToggle","onBookVisitToggle","currentLanguage","isShowInListing","displayAsProject","closeModal","texts","id","isPdp"]),w=Object(r.useState)({}),x=w[0],P=w[1],S=Object(l.a)("(max-width: 435px)"),E=Object(r.useState)(null),k=E[0],L=E[1],M=c.find((function(e){return e.displayPhone})),I=Object(r.useState)(M||c[0]||{})[0];return i.a.useEffect((function(){if(g)return P(v),void L(j);P(t.texts),L(k)}),[g]),we(p,{isMobile:S,size:1,id:"chat-box-goto",className:"chat-box"},we("div",{className:"agent-info"},we("p",{style:{textTransform:"capitalize",fontSize:"18px",fontWeight:"700",textAlign:"center",margin:"0 auto"}},x.enquiryFormHeading||"Enquiry Form"),!O&&we(s.a,{onClick:m})),we("div",{className:"actions"},we(ye,Object(o.a)({iovox:n,project:u,displayAsProject:h,texts:x,contacts:[I],currentAgent:I,onBookVisitToggle:f,onEmailModalToggle:d,listingId:k,currentLanguage:b,isShowInListing:g,closeModal:m,isPdp:O},y))))}xe.defaultProps={isShowInListing:!1,texts:{},displayAsProject:!1,id:null,closeModal:null,setOpenEnrichmentModal:null,isPdp:!1}},lRsg:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var o=n("HALo"),a=n("dhJC"),r=n("q1tI"),i=n.n(r),c=n("+p8+"),s=n("l9MK"),l=n("mwIZ"),u=n.n(l),d=n("ApNs"),p=n("B8uC"),f=n("1P4G"),b=i.a.createElement,g=function(e,t){var n=t.objectID,o=t.isFavourite,a=t.userPk,r={type:Object(f.a)(t),endpoint:"/api/favourites/".concat(o?"".concat(n,"/"):""),objectID:n,body:o?void 0:JSON.stringify({object_id:n,user:a}),options:{credentials:"include",headers:o?void 0:{"content-type":"application/json"}},randomSeed:Math.random()};return e[o?"deleteRequest":"post"](r).then((function(){return Object(f.d)(e,n,o)}))};function h(e){var t,n=e.canLikeListings,i=e.children,s=e.essentials,l=e.isAuthenticated,h=e.isFavourite,m=e.objectID,v=e.onDemand,j=e.onToggle,O=e.defaultToggleFavorite,y=Object(a.a)(e,["canLikeListings","children","essentials","isAuthenticated","isFavourite","objectID","onDemand","onToggle","defaultToggleFavorite"]),w=Object(r.useContext)(d.a),x=w.showDeeplinkModal,P=w.mobileMode,S=Object(p.a)(),E={objectID:m,isFavourite:h,userPk:null===y||void 0===y||null===(t=y.user)||void 0===t?void 0:t.pk},k=u()(S,[Object(f.a)(E),"isLoading"]);return Object(r.useEffect)((function(){l&&function(e,t){(0,t.fetch)({type:Object(f.b)(e),endpoint:"/api/favourites/listings/",query:{id__in:e,fields:"id"},options:{credentials:"include"}})}(m,S)}),[l]),Object(r.useEffect)((function(){O&&Number(O)===m&&g(S,E).then(j)}),[O]),b(c.Button,Object(o.a)({},y,{onClick:function(e){if(P)return e.preventDefault(),void x(s.data.deepLinkModal.signInUrl.mobile,s.data.deepLinkModal.signInUrl.web);n?g(S,E).then(j):v&&v()},busy:k}),i)}h.defaultProps={onDemand:void 0,onToggle:void 0};var m=i.a.createElement;function v(e){var t=e.label,n=e.iconCode,i=e.isAuthenticated,l=e.checkedIconCode,u=e.canLikeListings,d=e.noListingLikeModalToggle,b=e.objectID,g=e.showLabel,v=Object(a.a)(e,["label","iconCode","isAuthenticated","checkedIconCode","canLikeListings","noListingLikeModalToggle","objectID","showLabel"]),j=Object(r.useState)(0),O=j[0],y=j[1],w=Object(p.a)(),x=Object(f.c)(w,b);return m(h,Object(o.a)({},v,{canLikeListings:u,onDemand:d,onToggle:function(){y(O+1),w.fetch({type:"user",endpoint:"/api/portal/user/?t_=".concat((new Date).getTime()),options:{credentials:"include"},noCache:!0}),localStorage.removeItem("tempFavoriteSRPItem")},isAuthenticated:i,isFavourite:x,objectID:b}),m(c.Addon,{className:"icon"},m(s.a,{charCode:"".concat(x?l:n),color:x?"likeIcon":""})),g&&m("span",{className:"label"},t))}v.defaultProps={showLabel:!0}}}]);